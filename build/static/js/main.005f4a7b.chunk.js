(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{18:function(e,n,t){e.exports=t(41)},23:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(17),o=t.n(c),u=(t(23),t(6)),i=t(7),l=t(2),m=function(e){var n=e.name,t=e.number,a=e.onNameChange,c=e.onNumberChange,o=e.onSubmit;return r.createElement(r.Fragment,null,r.createElement("form",{onSubmit:o},r.createElement("div",null,"name:",r.createElement("input",{value:n,onChange:a})),r.createElement("div",null,"number:",r.createElement("input",{value:t,onChange:c})),r.createElement("div",null,r.createElement("button",{type:"submit"},"add"))))},f=function(e){var n=e.data,t=e.onDelete;return n.map((function(e){var n=e.name,c=e.number,o=e.id;return a.a.createElement(r.Fragment,{key:n+o},a.a.createElement("p",null,"".concat(n," ").concat(c," "),a.a.createElement("button",{onClick:function(){return t({name:n,id:o})}},"delete")))}))},d=function(e){var n=e.text,t=e.filter,a=e.onChange;return r.createElement(r.Fragment,null,r.createElement("div",null,"Search by ",n,":",r.createElement("input",{value:t,onChange:a})))},s=function(e){var n=e.notification;if(!n)return null;var t=n.content,a=n.type;return r.createElement("div",{className:a},t)},b=t(4),h=t.n(b),v="/api/persons",p=function(){return h.a.get(v).then((function(e){return e.data}))},E=function(e){return h.a.post(v,e).then((function(e){return e.data}))},g=function(e,n){return h.a.put("".concat(v,"/").concat(e),n).then((function(e){return e.data}))},j=function(e){return h.a.delete("".concat(v,"/").concat(e))},O=function(){var e=Object(r.useState)([]),n=Object(l.a)(e,2),t=n[0],c=n[1],o=Object(r.useState)(""),b=Object(l.a)(o,2),h=b[0],v=b[1],O=Object(r.useState)(""),w=Object(l.a)(O,2),C=w[0],y=w[1],S=Object(r.useState)(""),k=Object(l.a)(S,2),N=k[0],D=k[1],L=Object(r.useState)(null),x=Object(l.a)(L,2),F=x[0],A=x[1],I=function(e){return function(n){return e(n.target.value)}},J=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";A({content:e,type:n}),setTimeout((function(){A(null)}),3e3)},U=t;return N.trim()&&(U=t.filter((function(e){return e.name.toLocaleLowerCase().includes(N.toLocaleLowerCase())}))),Object(r.useEffect)((function(){p().then((function(e){c(e)}))}),[]),a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),a.a.createElement(s,{notification:F}),a.a.createElement(d,{text:"name",filter:N,onChange:I(D)}),a.a.createElement("h3",null,"Add a new"),a.a.createElement(m,{name:h,number:C,onSubmit:function(e){e.preventDefault();var n=t.find((function(e){return e.name===h}));if(n){if(!window.confirm("".concat(n.name," is already added to phonebook, replace the old number with a new one?")))return;return g(n.id,Object(i.a)(Object(i.a)({},n),{},{number:C})).then((function(e){var n=Object(u.a)(t);n.find((function(n){return n.id===e.id})).number=C,c(n),v(""),y(""),J("Updated ".concat(e.name),"success")})).catch((function(e){J(e.response.data.error,"error")}))}E({name:h,number:C}).then((function(e){var n=e.name,t=e.number,r=e.id;c((function(e){return[].concat(Object(u.a)(e),[{name:n,number:t,id:r}])})),v(""),y(""),J("Added ".concat(n),"success")})).catch((function(e){J(e.response.data.error,"error")}))},onNameChange:I(v),onNumberChange:I(y)}),a.a.createElement("h3",null,"Numbers"),a.a.createElement(f,{data:U,onDelete:function(e){var n=e.name,r=e.id;window.confirm("Delete ".concat(n,"?"))&&j(r).then((function(){c(t.filter((function(e){return e.id!==r}))),J("Contact succesfully deleted","success")})).catch((function(e){return"404"===e.response.status?(c(t.filter((function(e){return e.id!==r}))),void J("Information of ".concat(n," has already been removed from server"),"error")):e.message.includes("Error")?(console.error("Unable to delete contact: ".concat(e)),void J("Something went wrong, try refreshing the page :(","error")):void 0}))}}))};o.a.render(r.createElement(O,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.005f4a7b.chunk.js.map